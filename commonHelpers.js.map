{"version":3,"file":"commonHelpers.js","sources":["../src/main.js"],"sourcesContent":["import SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nconst pageForm = document.querySelector(\".form\");\nconst pageInput = document.querySelector(\"input\");\nconst pageGalleryBox = document.querySelector(\".gallery-box\");\nconst pageLoader = document.querySelector(\".loader\");\nconst pageGallery = document.querySelector(\".gallery\");\n\nconst searchParamsDefaults = {\n  key: \"34228101-50b55348103eeb6dd10b59f8d\",\n  q: \"cat\",\n  image_type: \"photo\",\n  orientation: \"horizontal\",\n  safesearch: true,\n};\n\nconst lightbox = new SimpleLightbox(\".gallery a\", {\n    captionsData: \"alt\",\n    captionDelay: 250,\n    nav: true,\n    close: true,\n    enableKeyboard: true,\n    docClose: true\n    });\n\nfunction searchImg(params) {\n    return fetch(`https://pixabay.com/api/?${params}`)\n        .then(response => {\n            if (!response.ok) {\n                throw new Error(response.statusText);\n            }\n            return response.json();\n        })\n        .then(({ hits }) => {\n            if (hits.length > 0) {\n                const renderImg = hits.reduce((html, hit) => {\n                    return (\n                        html +\n                        `<li class=\"gallery-item\">\n                        <a href=${hit.largeImageURL}>\n                        <img class=\"gallery-img\" src=${hit.webformatURL} alt=${hit.tags}>\n                        </a>\n                        <div class=\"gallery-text-box\">\n                        <p>Likes: <span class=\"text-value\">${hit.likes}</span></p>\n                        <p>Views: <span class=\"text-value\">${hit.views}</span></p>\n                        <p>Comments: <span class=\"text-value\">${hit.comments}</span></p>\n                        <p>Downloads: <span class=\"text-value\">${hit.downloads}</span></p>\n                        </div>\n                        </li>`\n                \n                    );\n                }, '');\n\n                pageGallery.innerHTML = renderImg;\n\n                lightbox.refresh();\n\n            } else {\n                iziToast.error({\n                    position: 'topRight',\n                    message: 'Sorry, there are no images matching your search query. Please try again!',\n                });\n            }\n        })\n    \n        .catch(error => {\n            console.log(error.message);\n        })\n        .finally(() => {\n            pageLoader.style.display = 'none';\n        });\n}\n\npageForm.addEventListener(\"submit\", event => {\n    event.preventDefault();\n    pageGallery.innerHTML = '';\n    pageLoader.style.display = 'block';\n    searchParamsDefaults.q = event.target.elements.search.value.trim();\n    const searchParams = new URLSearchParams(searchParamsDefaults);\n    searchImg(searchParams.toString());\n    event.currentTarget.reset();\n});"],"names":["pageForm","pageLoader","pageGallery","searchParamsDefaults","lightbox","SimpleLightbox","searchImg","params","response","hits","renderImg","html","hit","iziToast","error","event","searchParams"],"mappings":"6vBAKA,MAAMA,EAAW,SAAS,cAAc,OAAO,EAC7B,SAAS,cAAc,OAAO,EACzB,SAAS,cAAc,cAAc,EAC5D,MAAMC,EAAa,SAAS,cAAc,SAAS,EAC7CC,EAAc,SAAS,cAAc,UAAU,EAE/CC,EAAuB,CAC3B,IAAK,qCACL,EAAG,MACH,WAAY,QACZ,YAAa,aACb,WAAY,EACd,EAEMC,EAAW,IAAIC,EAAe,aAAc,CAC9C,aAAc,MACd,aAAc,IACd,IAAK,GACL,MAAO,GACP,eAAgB,GAChB,SAAU,EACd,CAAK,EAEL,SAASC,EAAUC,EAAQ,CACvB,OAAO,MAAM,4BAA4BA,GAAQ,EAC5C,KAAKC,GAAY,CACd,GAAI,CAACA,EAAS,GACV,MAAM,IAAI,MAAMA,EAAS,UAAU,EAEvC,OAAOA,EAAS,MAC5B,CAAS,EACA,KAAK,CAAC,CAAE,KAAAC,KAAW,CAChB,GAAIA,EAAK,OAAS,EAAG,CACjB,MAAMC,EAAYD,EAAK,OAAO,CAACE,EAAMC,IAE7BD,EACA;AAAA,kCACUC,EAAI;AAAA,uDACiBA,EAAI,oBAAoBA,EAAI;AAAA;AAAA;AAAA,6DAGtBA,EAAI;AAAA,6DACJA,EAAI;AAAA,gEACDA,EAAI;AAAA,iEACHA,EAAI;AAAA;AAAA,+BAKlD,EAAE,EAELV,EAAY,UAAYQ,EAExBN,EAAS,QAAO,CAEhC,MACgBS,EAAS,MAAM,CACX,SAAU,WACV,QAAS,0EAC7B,CAAiB,CAEjB,CAAS,EAEA,MAAMC,GAAS,CACZ,QAAQ,IAAIA,EAAM,OAAO,CACrC,CAAS,EACA,QAAQ,IAAM,CACXb,EAAW,MAAM,QAAU,MACvC,CAAS,CACT,CAEAD,EAAS,iBAAiB,SAAUe,GAAS,CACzCA,EAAM,eAAc,EACpBb,EAAY,UAAY,GACxBD,EAAW,MAAM,QAAU,QAC3BE,EAAqB,EAAIY,EAAM,OAAO,SAAS,OAAO,MAAM,OAC5D,MAAMC,EAAe,IAAI,gBAAgBb,CAAoB,EAC7DG,EAAUU,EAAa,SAAQ,CAAE,EACjCD,EAAM,cAAc,OACxB,CAAC"}